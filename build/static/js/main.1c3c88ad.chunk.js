(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{22:function(e,n,t){},23:function(e,n,t){},25:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(14),c=t.n(r),i=(t(21),t(22),t(16)),a=t(2),s=(t(23),t(1));function l(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var u={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:l,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=l();return e?JSON.parse(atob(e.split(".")[1])).user:null}},h="/api/users/";var j={signup:function(e){return fetch(h+"signup",{method:"POST",body:e}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken!")})).then((function(e){var n=e.token;return u.setToken(n)}))},logout:function(){u.removeToken()},login:function(e){return fetch(h+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials!")})).then((function(e){var n=e.token;return u.setToken(n)}))},getUser:function(){return u.getUserFromToken()}};function g(e){return Object(s.jsx)("h1",{children:"SIGNUP PAGE"})}t(25);function d(e){return Object(s.jsx)("h1",{children:"setup signup PAGE"})}var p=function(){var e=Object(o.useState)(j.getUser()),n=Object(i.a)(e,2),t=(n[0],n[1]);function r(){t(j.getUser())}return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(a.d,{children:[Object(s.jsx)(a.b,{exact:!0,path:"/login",children:Object(s.jsx)(d,{handleSignUpOrLogin:r})}),Object(s.jsx)(a.b,{exact:!0,path:"/signup",children:Object(s.jsx)(g,{handleSignUpOrLogin:r})}),j.getUser()?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(a.d,{children:Object(s.jsx)(a.b,{exact:!0,path:"/",children:"Home PAGE COMPONENT WOULD GO HEREE"})})}):Object(s.jsx)(a.a,{to:"/login"})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=t(9);c.a.render(Object(s.jsx)(b.a,{children:Object(s.jsx)(p,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.1c3c88ad.chunk.js.map